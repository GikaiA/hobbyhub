{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import\"./EditPost.css\";import{useNavigate,useParams,Link}from\"react-router-dom\";import supabase from\"../supabaseClient\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EditPost(){const{postId}=useParams();const[post,setPost]=useState(null);const[title,setTitle]=useState(\"\");const[content,setContent]=useState(\"\");const navigate=useNavigate();useEffect(()=>{fetchPostById(postId);},[postId]);const fetchPostById=async id=>{try{const{data,error}=await supabase.from(\"posts\").select(\"*\").eq(\"id\",id).single();if(error){console.error(\"Error fetching post:\",error.message);return;}setPost(data);setTitle(data.title);setContent(data.content);}catch(error){console.error(\"Error fetching post:\",error.message);}};const handleSubmit=async e=>{e.preventDefault();try{const{error}=await supabase.from(\"posts\").update([{id:postId,title,content}]);if(error){console.error(\"Error updating post:\",error.message);return;}navigate(\"/post/\".concat(postId));}catch(error){console.error(\"Error updating post:\",error.message);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"editpost\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"backfeedbutton\"}),/*#__PURE__*/_jsx(Link,{to:\"/feed\",children:/*#__PURE__*/_jsx(\"button\",{className:\"backfeed-button\",children:\"Back to Feed\"})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Post\"}),post&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-section\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",value:title,onChange:e=>setTitle(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{className:\"textarea-section\",children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Content\",value:content,onChange:e=>setContent(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{className:\"button-section\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"save-button\",children:\"Save Changes\"})})]})]});}export default EditPost;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","Link","supabase","jsx","_jsx","jsxs","_jsxs","EditPost","postId","post","setPost","title","setTitle","content","setContent","navigate","fetchPostById","id","data","error","from","select","eq","single","console","message","handleSubmit","e","preventDefault","update","concat","className","children","to","onSubmit","type","placeholder","value","onChange","target"],"sources":["C:/Users/Kai/Desktop/hobbyhub/src/EditPost/EditPost.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./EditPost.css\";\r\nimport { useNavigate, useParams, Link } from \"react-router-dom\";\r\nimport supabase from \"../supabaseClient\";\r\n\r\nfunction EditPost() {\r\n  const { postId } = useParams();\r\n  const [post, setPost] = useState(null);\r\n  const [title, setTitle] = useState(\"\");\r\n  const [content, setContent] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetchPostById(postId);\r\n  }, [postId]);\r\n\r\n  const fetchPostById = async (id) => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from(\"posts\")\r\n        .select(\"*\")\r\n        .eq(\"id\", id)\r\n        .single();\r\n\r\n      if (error) {\r\n        console.error(\"Error fetching post:\", error.message);\r\n        return;\r\n      }\r\n\r\n      setPost(data);\r\n      setTitle(data.title);\r\n      setContent(data.content);\r\n    } catch (error) {\r\n      console.error(\"Error fetching post:\", error.message);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const { error } = await supabase\r\n        .from(\"posts\")\r\n        .update([{ id: postId, title, content }]);\r\n\r\n      if (error) {\r\n        console.error(\"Error updating post:\", error.message);\r\n        return;\r\n      }\r\n\r\n      navigate(`/post/${postId}`);\r\n    } catch (error) {\r\n      console.error(\"Error updating post:\", error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"editpost\">\r\n      <div className=\"backfeedbutton\"></div>\r\n      <Link to=\"/feed\">\r\n        <button className=\"backfeed-button\">Back to Feed</button>\r\n      </Link>\r\n      <h2>Edit Post</h2>\r\n      {post && (\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"input-section\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Title\"\r\n              value={title}\r\n              onChange={(e) => setTitle(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"textarea-section\">\r\n            <textarea\r\n              placeholder=\"Content\"\r\n              value={content}\r\n              onChange={(e) => setContent(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"button-section\">\r\n            <button type=\"submit\" className=\"save-button\">\r\n              Save Changes\r\n            </button>\r\n          </div>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditPost;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}